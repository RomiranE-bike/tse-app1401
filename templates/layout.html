<!doctype html>
<html lang="en" dir="rtl" xmlns="">
<head>
  {% block head %}
<!--# -*- coding: utf-8 -*- -->
<!--edited on 1400/11/27  02/16/2022-->
<!--@author: mahmoud esmaeili-->

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!--<meta http-equiv="refresh" content="20">-->
  <!--<meta http-equiv="refresh" content="5;url=http://Page.htm" />-->
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" >
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
  <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
  <!----------------------------------------------------------------------------------->
  <!------------------------------------------------bootstrap 5 data table ok---------->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css" >-->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap5.min.css" >

  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap5.min.js"></script>
  <!------------------------------------------------bootstrap 5 data table ok---------->

<script>
        /**
     * Back to top button
     */
    function goTop(){
        window.scrollTo(0, 0);
    }

</script>
<script>
$('body').scrollspy({target:'#nav-scrooll'});
$("#nav-scroll a").on('click',function(e){
   if(this.hash !==''){
       e.preventDefault();
       const hash = this.hash;
       $('html,body').animate({
           scrollTop: $(hash).offset().top
       },900,function(){
           window.location.hash = hash;
       }, 'slow';)
   }
})
</script>

  <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/tse_app_style.css') }}">
  <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/hero.css') }}">
  <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/about.css') }}">
  <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/footer.css') }}">
  <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/clients.css') }}">
  <!--<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/font_fa.css') }}">-->
  <!--<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/main.css') }}">-->

  <title>{% block title %}{% endblock %}وب اپلیکیشن آنالیز بازار</title>
  {% endblock %}
</head>


<body id="home" data-spy="scroll" data-target="#nav-scroll">
<!------------------------------------------------navbar fixed top------------------------------------------->
<section id="nav_bar">
<nav class="navbar transparent navbar-inverse navbar-expand-md navbar-light fixed-top" id="nav-scroll">
    <!--<nav class="navbar navbar-expand-lg navbar-light bg-light">-->
    <div class="container-fluid">
<!------------------------------------------------------------------------------->
        <div class="logo logoMini ">
            <img class="rounded-circle p-1" src="/static/img/logo-03.png" height="50" alt="Best Show">
        </div>
        <a class="navbar-brand justify-content-center" href="#">
            <!--<img src="/static/img/logo-01.jpg" height="28" alt="داشبورد آنالیز بازار">-->
            <!--<img class="rounded-circle p-1" src="/static/img/logo-03.png" height="50">-->
            داشبورد آنالیز بازار
        </a>

<!------------------------------------------------------------------------------->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <!----------------------------------------------------------------------------->
        <div class="collapse navbar-collapse " id="navbarSupportedContent">

            <!--<ul class="navbar-nav me-auto mb-2 mb-lg-0">-->
            <!--<ul class="navbar-nav ml-auto nav-flex-icons">-->
            <!--<ul class="navbar-nav mr-auto ">-->
            <ul class="navbar-nav">
                <li>
                    <a class="nav-link " href="{{url_for('market_view')}}" id="navbarDropdown">
                         نمای بازارها
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
                       role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        جدول ها
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a href="{{url_for('data_table')}}" class="nav-item nav-link">دیتای بازار</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a href="{{url_for('pe_table')}}" class="nav-item nav-link">نسبت قیمت به درآمد</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a href="{{url_for('hot_money_table')}}" class="nav-item nav-link">پول هوشمند</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a href="{{url_for('qeueu_table')}}" class="nav-item nav-link">صف خرید و فروش</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
                       role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        چارت ها
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a href="{{url_for('neg_pos_chart')}}" class="nav-item nav-link">نماد های مثبت و منفی</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a href="{{url_for('best_co_chart')}}" class="nav-item nav-link">برترین های صنعت و گروه</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a href="{{url_for('hot_money_chart')}}" class="nav-item nav-link">پول هوشمند</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a href="{{url_for('pe_chart')}}" class="nav-item nav-link">نسبت قیمت به درآمد</a></li>
                    </ul>
                </li>
                <li>
                    <a class="nav-link " href="{{url_for('filter')}}" id="navbarDropdown">
                         فیلتر ها
                    </a>
                </li>
                <li>
                    <a class="nav-link " href="{{url_for('risk')}}" id="navbarDropdown">
                         بیانیه ریسک
                    </a>
                </li>
                <li>
                    <a class="nav-link " href="{{url_for('about_us')}}" id="navbarDropdown">
                         در باره ما
                    </a>
                </li>
            </ul>
        </div>
<!-------------------------------------------------------------------------------------------------------->
        <div class="pic p-1 pt-0 rounded-circle mb-0 ">
            <img class="rounded-circle p-1" src="/static/img/freelancer-02.png" height="80" alt="profile_picture">
            (freelancer)
            محمود اسماعیلی
             </div>
        <!--<div class="p-4 pt-5">-->
        <!--<a href="#" class="img logo rounded-circle mb-5"-->
        <!--style="background-image: url(/static/img/user-avatar.png);"></a>-->
        <!--<img src="/static/img/user-avatar.png" height="50" alt="profile_picture">-->
        <!--<h3>محمود اسماعیلی</h3>-->
        <!--<p>freelancer</p>-->
        <!--</div>-->
        <!---------------------------------------------------------------------------------------------->
    </div>
</nav>
</section>
<!-------------------------------------------------------------------------------------------------------->
<div id="content" class="container main-container">
  {% block content %}
  {% endblock %}
</div>
<!-------------------------------------------------------------------------------------------------------->
<script src="https://code.iconify.design/2/2.1.2/iconify.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<!-------------------------------------------------------swiper ok---------------------------------------->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.0.6/swiper-bundle.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.0.6/swiper-bundle.css">
<script type="text/javascript" src="{{ url_for('static', filename='js/anyar.js') }}"></script>
<!------------------------------------------javascript data table and chart ok---------------------------->
<script type="text/javascript" src="{{ url_for('static', filename='js/data_table.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/neg_pos_number.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/neg_pos_donut_chart.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/best_co_group_pie_chart.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/complex_chart.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/top_co_bar_chart.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/group_value_bar_chart.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/scatter_chart.js') }}"></script>

<!------------------------------------------javascript data table and chart ok----------------------------->
<section class="pieChart">
  <script type="text/javascript">
      // <!--------------------------------------------------best co pie chart------------------------------------------>
      var top_ten_labels = [{% for i in range(10) %} '{{top_ten_co.best_group_list[i]}}', {% endfor %} ]
      var top_ten_values = [{% for i in range(10) %} {{top_ten_co.best_group_value[i]}}, {% endfor %} ]
      pieChart(top_ten_labels,top_ten_values,'myPlot3')
      // <!--------------------------------------------------best co pie chart------------------------------------------>

  </script>
</section>
<section class="complexChart">
  <script type="text/javascript">
      function complexChart(xlist1,ylist1,id) {

          // var market_average_pe = {{market_average_pe}};
          // var group_average_pe = {{group_selected_items.get('group_pe_average')}}[a];

          var colors = [];
          for(var i = 0; i < ylist1.length; i++){
              var color=[
                  'rgba(1,118,11,0.9)',//green dark
                  'rgba(149,225,155,0.5)',//green ligth
                  'rgba(77,196,241,0.5)',//blue ligth
                  'rgba(254,105,105,0.5)',//red ligth
                  'rgba(251,3,3,0.9)',]; //red dark


              if(ylist1[i]>= 1 & ylist1[i]<= 5){colors[i]=color[0];}
              else if (ylist1[i] > 5 & ylist1[i]< 15 ){colors[i]=color[1];}
              else if (ylist1[i]> 15 ){colors[i]=color[3];}
              else if (ylist1[i]< 1 ){colors[i]=color[4];}
          }

          // Generate values
          // var ylist2 = [];
          // var ylist3 = [];
          //
          // for (var i = 0; i <= xlist1.length; i++) {
          //     ylist2[i]= market_average_pe;
          //     ylist3[i]= group_average_pe;
          // }
          // Define Data
          var data = [
              {x: xlist1, y: ylist1, mode: "markers",name:'نمادp/e',marker:{color:colors,size:8}},
              // {x: xlist1, y: ylist2, mode: "lines",name:'بازارp/e',marker:{color:'rgba(254,105,105,0.8)'}},//red ligth
              // {x: xlist1, y: ylist3, mode: "lines",name:'گروهp/e',marker:{color:'rgba(77,196,241,0.8)'}}//blue ligth

          ];

          // Define Layout
          var layout = {
              xaxis: { title: "نماد"},
              yaxis: { title: "P/E"},
              title: "پراکندگی p/e",
              font: {size: 12,family: "iranyekan", color: "gray"},
          };
          var config = {
              responsive: true,
              scrollZoom: true,
          }

          // Display using Plotly
          return Plotly.newPlot(id, data, layout,config);
      }


      var group1_xValues = [{% for i in range(group_selected_items.get('group_sort_list')[0]|length) %}
      '{{group_selected_items.get("group_sort_list")[0][i].get("symbol")}}', {% endfor %} ];
      var group1_yValues = [{% for i in range(group_selected_items.get('group_sort_list')[0]|length) %}
      {{group_selected_items.get("group_sort_list")[0][i].get('pe')}}, {% endfor %} ];
      var group2_xValues = [{% for i in range(group_selected_items.get('group_sort_list')[1]|length) %}
      '{{group_selected_items.get("group_sort_list")[1][i].get("symbol")}}', {% endfor %} ];
      var group2_yValues = [{% for i in range(group_selected_items.get('group_sort_list')[1]|length) %}
      {{group_selected_items.get("group_sort_list")[1][i].get('pe')}}, {% endfor %} ];
      var group3_xValues = [{% for i in range(group_selected_items.get('group_sort_list')[2]|length) %}
      '{{group_selected_items.get("group_sort_list")[2][i].get("symbol")}}', {% endfor %} ];
      var group3_yValues = [{% for i in range(group_selected_items.get('group_sort_list')[2]|length) %}
      {{group_selected_items.get("group_sort_list")[2][i].get('pe')}}, {% endfor %} ];
      var group4_xValues = [{% for i in range(group_selected_items.get('group_sort_list')[3]|length) %}
      '{{group_selected_items.get("group_sort_list")[3][i].get("symbol")}}', {% endfor %} ];
      var group4_yValues = [{% for i in range(group_selected_items.get('group_sort_list')[3]|length) %}
      {{group_selected_items.get("group_sort_list")[3][i].get('pe')}}, {% endfor %} ];
      var group5_xValues = [{% for i in range(group_selected_items.get('group_sort_list')[4]|length) %}
      '{{group_selected_items.get("group_sort_list")[4][i].get("symbol")}}', {% endfor %} ];
      var group5_yValues = [{% for i in range(group_selected_items.get('group_sort_list')[4]|length) %}
      {{group_selected_items.get("group_sort_list")[4][i].get('pe')}}, {% endfor %} ];


      complexChart(group1_xValues,group1_yValues,'myPlot61')
      complexChart(group2_xValues,group2_yValues,'myPlot62')
      complexChart(group3_xValues,group3_yValues,'myPlot63')
      complexChart(group4_xValues,group4_yValues,'myPlot64')
      complexChart(group5_xValues,group5_yValues,'myPlot65')
  </script>
</section>
<section class="neg_pos_donut_chart">
  <script type="text/javascript">
      //-------------------------------------------------------------------------------------------
      var bourse=[{{bourse_status.stock_pos}},{{bourse_status.stock_neg}}]
      var fara=[{{fara_bourse_status.stock_pos_fara}},{{fara_bourse_status.stock_neg_fara}}]

      var market=[{{market_posetive_percent|length}},{{market_negetive_percent|length}}]


      //----------------------------------------------------------------------------------------------

      donutChart(bourse, "myPlot1");
      donutChart(fara, "myPlot2");
      donutChart(market, "myPlot8");


      //----------------------------------------------------------------------------------------------
  </script>
</section>
<section class="scatterChart">
  <script type="text/javascript">
      var mlist1 = [{% for dict in market_list %} '{{dict.get("symbol")}}', {% endfor %} ]
      var mlist2 = [{% for dict in market_list %} {{dict.get('last_percent')}}, {% endfor %} ]




      scatterChart(mlist1,mlist2,"myPlot9");




  </script>
</section>
<section class="top_co_bar_chart">
  <script type="text/javascript">
      var market_val_list1 = [{% for i in range(1,11) %}
      '{{best_co_dict.group_name[i]}}', {% endfor %} ]
      var market_val_list2 = [{% for i in range(1,11) %}
      {{best_co_dict.trade_value[i]}}, {% endfor %} ]
      var percent_list = [{% for i in range(10) %}
      {{average_percent_list[i]}} , {% endfor %}]

      barChart(market_val_list1,market_val_list2,percent_list,'myPlot4')
  </script>
</section>
<section class="bubble_chart">
  <script type="text/javascript">
      // var market_val_list1 = [{% for i in range(1,11) %}
      // '{{best_co_dict.group_name[i]}}', {% endfor %} ]
      // var market_val_list2 = [{% for i in range(1,11) %}
      // {{best_co_dict.trade_value[i]}}, {% endfor %} ]
      // var percent_list = [{% for i in range(10) %}
      // {{average_percent_list[i]}} , {% endfor %}]
      //
      // var b1 = ['a','b','c','d'];
      // var b2 = [10,20,30,40];
      // var b3 = [20,30,40,50];
      // // bubble_chart_01(market_val_list1,market_val_list2,'myPlot4')
      // bubble_chart_01(b1,b2,'myPlot4')
  </script>
</section>
<!---------------------------------------------------------------------------------------------------------->
<!--<footer>-->
  <!--<div id="footer" class="container text-center">-->
    <!--{% block footer %}-->
    <!--تمامی حقوق مادی و معنوی این وب اپلیکیشن متعلق به توسعه دهنده آن(محمود اسماعیلی) می باشد و هرگونه کپی برداری غیرقانونی محسوب خواهد شد.-->
    <!--{% endblock %}-->
  <!--</div>-->
<!--</footer>-->
<!--<button type="button" class="scroll-top" onclick="goTop();">بازگشت <i class="bi-arrow-up-circle-fill"></i></button>-->
<button id="myBtn" type="button" class="btn btn-outline-success scroll-top" onclick="goTop();">بازگشت
       <i class="bi-arrow-up-circle-fill"></i></button>

<!---------------------------------------------------------------------------------------------------------->

<footer id="footer">

  <!--<div class="footer-newsletter">-->
    <!--<div class="container">-->
      <!--<div class="row">-->
        <!--<div class="col-lg-6">-->
          <!--<h4>بروز رسانی</h4>-->
          <!--<p> لطفا برای دسترسی به آخرین بروز رسانی ها پست الکترونیک خود را وارد نمایید.</p>-->
        <!--</div>-->
        <!--<div class="col-lg-6">-->
          <!--<form action="" method="post">-->
            <!--<input type="email" name="email"><input type="submit" value="تایید">-->
          <!--</form>-->
        <!--</div>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->

  <div class="footer-top">
    <div class="container">
      <div class="row">

        <div class="col-sm-12 col-md-6 col-lg-3 footer-links">
          <h4>پیوند ها: </h4>
          <ul>
            <li><i class="bx bx-chevron-right"></i> <a href="#" class="text">بورس</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="#" class="text">فرابورس</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="#" class="text">کدال</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="#" class="text">کارگزاری مفید</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="#" class="text">سپرده گذاری مرکزی</a></li>
          </ul>
        </div>

        <div class="col-sm-12 col-md-6 col-lg-3 footer-links">
          <h4>علاقه مندی ها</h4>
          <ul>
            <li><i class="bx bx-chevron-right"></i> <a href="#" class="text">طراحی وب</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="#" class="text">توسعه نرم افزار</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="#" class="text">تولید محصول</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="#" class="text">مالی</a></li>
            <li><i class="bx bx-chevron-right"></i> <a href="#" class="text">برنامه نویسی</a></li>
          </ul>
        </div>

        <div class="col-sm-12 col-md-6 col-lg-3 footer-contact">
          <h4>ارتباط با ما: </h4>
          <p>
            ایران <br>
            مازندران<br>
            <br><br>
            <strong><i class="bi bi-phone phone-icon " ></i>  </strong> 1626 323 911 98+<br>
            <strong><i class="bi bi-envelope " ></i></strong> mahmoudesmaeili99@gmail.com<br>
          </p>

        </div>

        <div class="col-sm-12 col-md-6 col-lg-3 footer-info">
          <h3> </h3>
          <p></p>
          <div class="social-links mt-3">
              <a href=""><span class="iconify" data-icon="logos:telegram"></span></a>
              <a href=""><span class="iconify" data-icon="logos:whatsapp"></span></span></a>
              <a href=""><span class="iconify" data-icon="ri:twitter-fill"></span></a>
              <a href=""><span class="iconify" data-icon="ri:instagram-fill"
                               style="color: #d35349;"></span></a>
              <a href=""><span class="iconify" data-icon="el:facebook"></span></a>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="container">
      <div class="copyright">
          تمامی حقوق مادی و معنوی این وب اپلیکیشن
          متعلق به توسعه دهنده آن(محمود اسماعیلی) می باشد
          و هرگونه کپی برداری غیرقانونی محسوب خواهد شد.
      </div>
    <div class="copyright">
      &copy; Copyright <strong><span></span></strong> All Rights Reserved
    </div>
    <div class="credits">
      <!-- All the links in the footer should remain intact. -->
      <!-- You can delete the links only if you purchased the pro version. -->
      <!-- Licensing information: https://bootstrapmade.com/license/ -->
      <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/anyar-free-multipurpose-one-page-bootstrap-theme/ -->
      Powered by <a href="#">Bootstrap</a>

    </div>
  </div>
</footer><!-- End Footer -->

</body>
</html>