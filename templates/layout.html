<!doctype html>
<html lang="en" dir="rtl" xmlns="">
<head>
  {% block head %}
<!--# -*- coding: utf-8 -*- -->
<!--edited on 1400/11/10  01/30/2022-->
<!--@author: mahmoud esmaeili-->

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!--<meta http-equiv="refresh" content="20">-->
  <!--<meta http-equiv="refresh" content="5;url=http://Page.htm" />-->
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" >
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
  <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
  <!----------------------------------------------------------------------------------->
  <!------------------------------------------------bootstrap 5 data table ok---------->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css" >-->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap5.min.css" >

  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap5.min.js"></script>
  <!------------------------------------------------bootstrap 5 data table ok---------->

  <style>
    @font-face {
      font-family: iranyekan;
      font-style: normal;
      font-weight: 700;
      src: url("https://static.accessban.com/views/default/fonts/iranyekan/Farsi_numerals_(Non_Standard)/WebFonts/fonts/eot/iranyekanwebbold(fanum).eot");
      src: url("https://static.accessban.com/views/default/fonts/iranyekan/Farsi_numerals_(Non_Standard)/WebFonts/fonts/eot/iranyekanwebbold(fanum).eot?#iefix")
      format("embedded-opentype"),
      url("https://static.accessban.com/views/default/fonts/iranyekan/Farsi_numerals_(Non_Standard)/WebFonts/fonts/woff2/iranyekanwebbold(fanum).woff2")
      format("woff2"),
      url("https://static.accessban.com/views/default/fonts/iranyekan/Farsi_numerals_(Non_Standard)/WebFonts/fonts/woff/iranyekanwebbold(fanum).woff")
      format("woff"),
      url("https://static.accessban.com/views/default/fonts/iranyekan/Farsi_numerals_(Non_Standard)/WebFonts/fonts/ttf/iranyekanwebbold(fanum).ttf")
      format("truetype")
    }

    @font-face {
      font-family: iranyekan;
      font-style: normal;
      font-weight: 400;
      src: url("https://static.accessban.com/views/default/fonts/iranyekan/Farsi_numerals_(Non_Standard)/WebFonts/fonts/eot/iranyekanwebregular(fanum).eot");
      src: url("https://static.accessban.com/views/default/fonts/iranyekan/Farsi_numerals_(Non_Standard)/WebFonts/fonts/eot/iranyekanwebregular(fanum).eot?#iefix") format("embedded-opentype"), url("https://static.accessban.com/views/default/fonts/iranyekan/Farsi_numerals_(Non_Standard)/WebFonts/fonts/woff2/iranyekanwebregular(fanum).woff2") format("woff2"), url("https://static.accessban.com/views/default/fonts/iranyekan/Farsi_numerals_(Non_Standard)/WebFonts/fonts/woff/iranyekanwebregular(fanum).woff") format("woff"), url("https://static.accessban.com/views/default/fonts/iranyekan/Farsi_numerals_(Non_Standard)/WebFonts/fonts/ttf/iranyekanwebregular(fanum).ttf") format("truetype")
    }

    @font-face {
      font-family: fontawesome;
      src: url("https://static.accessban.com/views/default/css/font-awesome-4.5.0/fonts/fontawesome-webfont.eot");
      src: url("https://static.accessban.com/views/default/css/font-awesome-4.5.0/fonts/fontawesome-webfont.eot?#iefix&v=4.0.3") format("embedded-opentype"), url("https://static.accessban.com/views/default/css/font-awesome-4.5.0/fonts/fontawesome-webfont.woff") format("woff"), url("https://static.accessban.com/views/default/css/font-awesome-4.5.0/fonts/fontawesome-webfont.ttf") format("truetype"), url("https://static.accessban.com/views/default/css/font-awesome-4.5.0/fonts/fontawesome-webfont.svg#fontawesomeregular") format("svg");
      font-weight: 400;
      font-style: normal
    }
  </style>
  <style>
    body{
      font-family: iranyekan;
      margin:5%;
    }
    .navbar {
      /*background: #1766a0;*/
      background: #1766a0;
      border-bottom:3px solid #25e3fa;


    }
    .navbar   a {
      color: white !important;
    }

    .navbar   a:hover{
      border-bottom: 3px solid #25e3fa;
    }
    .navbar-toggler{
          background-color: white;
          }
    
    .scroll-top{
      position: fixed;
      bottom: 10px;
      right: 10px;
      z-index: 99;
      background: #1766a0;
      color: #fff;
      border-radius: 10px;
      padding: 15px;
      font-weight: bold;
      line-height: normal;
      border: none;
    }

    /*--------------------------------------------------------------
# Back to top button
--------------------------------------------------------------*/
    .back-to-top {
      position: fixed;
      visibility: hidden;
      opacity: 0;
      right: 15px;
      bottom: 15px;
      z-index: 996;
      background: #0880e8;
      width: 40px;
      height: 40px;
      border-radius: 50px;
      transition: all 0.4s;
    }
    .back-to-top i {
      font-size: 28px;
      color: #fff;
      line-height: 0;
    }
    .back-to-top:hover {
      background: #2194f7;
      color: #fff;
    }
    .back-to-top.active {
      visibility: visible;
      opacity: 1;
    }

    /*--------------------------------------------------------------
    # Preloader
    --------------------------------------------------------------*/
  </style>
  <script>
          /**
       * Back to top button
       */
      function goTop(){
          window.scrollTo(0, 0);
      }

  </script>

<script>
 $('body').scrollspy({target:'#nav-scrooll'});
 $("#nav-scroll a").on('click',function(e){
     if(this.hash !==''){
         e.preventDefault();
         const hash = this.hash;
         $('html,body').animate({
             scrollTop: $(hash).offset().top
         },900,function(){
             window.location.hash = hash;
         }, 'slow';)
     }
 })
</script>

  <!--<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/font_fa.css') }}">-->
  <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/tse_app_style.css') }}">
  <!--<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/main.css') }}">-->

  <title>{% block title %}{% endblock %} - Python & Javascript</title>
  {% endblock %}
</head>


<body id="home" data-spy="scroll" data-target="#nav-scroll">

<!-------------------------------------------------------------------------------------------------------->
<div id="content" class="container main-container">
  {% block content %}
  {% endblock %}
</div>
<!-------------------------------------------------------------------------------------------------------->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<!------------------------------------------javascript data table and chart ok---------------------------->
<script type="text/javascript" src="{{ url_for('static', filename='js/data_table.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/neg_pos_number.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/neg_pos_donut_chart.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/best_co_group_pie_chart.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/complex_chart.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/top_co_bar_chart.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/group_value_bar_chart.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/scatter_chart.js') }}"></script>

<!------------------------------------------javascript data table and chart ok----------------------------->
<section class="pieChart">
  <script type="text/javascript">
      // <!--------------------------------------------------best co pie chart------------------------------------------>
      var top_ten_labels = [{% for i in range(10) %} '{{top_ten_co.best_group_list[i]}}', {% endfor %} ]
      var top_ten_values = [{% for i in range(10) %} {{top_ten_co.best_group_value[i]}}, {% endfor %} ]
      pieChart(top_ten_labels,top_ten_values,'myPlot3')
      // <!--------------------------------------------------best co pie chart------------------------------------------>

  </script>
</section>
<section class="complexChart">
  <script type="text/javascript">
      function complexChart(xlist1,ylist1,id) {

          // var market_average_pe = {{market_average_pe}};
          // var group_average_pe = {{group_selected_items.get('group_pe_average')}}[a];

          var colors = [];
          for(var i = 0; i < ylist1.length; i++){
              var color=[
                  'rgba(1,118,11,0.9)',//green dark
                  'rgba(149,225,155,0.5)',//green ligth
                  'rgba(77,196,241,0.5)',//blue ligth
                  'rgba(254,105,105,0.5)',//red ligth
                  'rgba(251,3,3,0.9)',]; //red dark


              if(ylist1[i]>= 1 & ylist1[i]<= 5){colors[i]=color[0];}
              else if (ylist1[i] > 5 & ylist1[i]< 15 ){colors[i]=color[1];}
              else if (ylist1[i]> 15 ){colors[i]=color[3];}
              else if (ylist1[i]< 1 ){colors[i]=color[4];}
          }

          // Generate values
          // var ylist2 = [];
          // var ylist3 = [];
          //
          // for (var i = 0; i <= xlist1.length; i++) {
          //     ylist2[i]= market_average_pe;
          //     ylist3[i]= group_average_pe;
          // }
          // Define Data
          var data = [
              {x: xlist1, y: ylist1, mode: "markers",name:'نمادp/e',marker:{color:colors,size:8}},
              // {x: xlist1, y: ylist2, mode: "lines",name:'بازارp/e',marker:{color:'rgba(254,105,105,0.8)'}},//red ligth
              // {x: xlist1, y: ylist3, mode: "lines",name:'گروهp/e',marker:{color:'rgba(77,196,241,0.8)'}}//blue ligth

          ];

          // Define Layout
          var layout = {
              xaxis: { title: "نماد"},
              yaxis: { title: "P/E"},
              title: "پراکندگی p/e",
              font: {size: 12,family: "iranyekan", color: "gray"},
          };
          var config = {
              responsive: true,
              scrollZoom: true,
          }

          // Display using Plotly
          return Plotly.newPlot(id, data, layout,config);
      }


      var group1_xValues = [{% for i in range(group_selected_items.get('group_sort_list')[0]|length) %}
      '{{group_selected_items.get("group_sort_list")[0][i].get("symbol")}}', {% endfor %} ];
      var group1_yValues = [{% for i in range(group_selected_items.get('group_sort_list')[0]|length) %}
      {{group_selected_items.get("group_sort_list")[0][i].get('pe')}}, {% endfor %} ];
      var group2_xValues = [{% for i in range(group_selected_items.get('group_sort_list')[1]|length) %}
      '{{group_selected_items.get("group_sort_list")[1][i].get("symbol")}}', {% endfor %} ];
      var group2_yValues = [{% for i in range(group_selected_items.get('group_sort_list')[1]|length) %}
      {{group_selected_items.get("group_sort_list")[1][i].get('pe')}}, {% endfor %} ];
      var group3_xValues = [{% for i in range(group_selected_items.get('group_sort_list')[2]|length) %}
      '{{group_selected_items.get("group_sort_list")[2][i].get("symbol")}}', {% endfor %} ];
      var group3_yValues = [{% for i in range(group_selected_items.get('group_sort_list')[2]|length) %}
      {{group_selected_items.get("group_sort_list")[2][i].get('pe')}}, {% endfor %} ];
      var group4_xValues = [{% for i in range(group_selected_items.get('group_sort_list')[3]|length) %}
      '{{group_selected_items.get("group_sort_list")[3][i].get("symbol")}}', {% endfor %} ];
      var group4_yValues = [{% for i in range(group_selected_items.get('group_sort_list')[3]|length) %}
      {{group_selected_items.get("group_sort_list")[3][i].get('pe')}}, {% endfor %} ];
      var group5_xValues = [{% for i in range(group_selected_items.get('group_sort_list')[4]|length) %}
      '{{group_selected_items.get("group_sort_list")[4][i].get("symbol")}}', {% endfor %} ];
      var group5_yValues = [{% for i in range(group_selected_items.get('group_sort_list')[4]|length) %}
      {{group_selected_items.get("group_sort_list")[4][i].get('pe')}}, {% endfor %} ];


      complexChart(group1_xValues,group1_yValues,'myPlot61')
      complexChart(group2_xValues,group2_yValues,'myPlot62')
      complexChart(group3_xValues,group3_yValues,'myPlot63')
      complexChart(group4_xValues,group4_yValues,'myPlot64')
      complexChart(group5_xValues,group5_yValues,'myPlot65')
  </script>
</section>
<section class="neg_pos_donut_chart">
  <script type="text/javascript">
      //-------------------------------------------------------------------------------------------
      var bourse=[{{bourse_status.stock_pos}},{{bourse_status.stock_neg}}]
      var fara=[{{fara_bourse_status.stock_pos_fara}},{{fara_bourse_status.stock_neg_fara}}]

      var market=[{{market_posetive_percent|length}},{{market_negetive_percent|length}}]


      //----------------------------------------------------------------------------------------------

      donutChart(bourse, "myPlot1");
      donutChart(fara, "myPlot2");
      donutChart(market, "myPlot8");


      //----------------------------------------------------------------------------------------------
  </script>
</section>
<section class="scatterChart">
  <script type="text/javascript">
      var mlist1 = [{% for dict in market_list %} '{{dict.get("symbol")}}', {% endfor %} ]
      var mlist2 = [{% for dict in market_list %} {{dict.get('last_percent')}}, {% endfor %} ]




      scatterChart(mlist1,mlist2,"myPlot9");




  </script>
</section>
<section class="top_co_bar_chart">
  <script type="text/javascript">
      var market_val_list1 = [{% for i in range(1,11) %}
      '{{best_co_dict.group_name[i]}}', {% endfor %} ]
      var market_val_list2 = [{% for i in range(1,11) %}
      {{best_co_dict.trade_value[i]}}, {% endfor %} ]
      var percent_list = [{% for i in range(10) %}
      {{average_percent_list[i]}} , {% endfor %}]

      barChart(market_val_list1,market_val_list2,percent_list,'myPlot4')
  </script>
</section>
<section class="bubble_chart">
  <script type="text/javascript">
      // var market_val_list1 = [{% for i in range(1,11) %}
      // '{{best_co_dict.group_name[i]}}', {% endfor %} ]
      // var market_val_list2 = [{% for i in range(1,11) %}
      // {{best_co_dict.trade_value[i]}}, {% endfor %} ]
      // var percent_list = [{% for i in range(10) %}
      // {{average_percent_list[i]}} , {% endfor %}]
      //
      // var b1 = ['a','b','c','d'];
      // var b2 = [10,20,30,40];
      // var b3 = [20,30,40,50];
      // // bubble_chart_01(market_val_list1,market_val_list2,'myPlot4')
      // bubble_chart_01(b1,b2,'myPlot4')
  </script>
</section>
<!---------------------------------------------------------------------------------------------------------->
<footer>
  <div id="footer" class="container text-center">
    {% block footer %}
    <!--&copy; Copyright 2021-2022 by mahmoud esmaeili-->
    تمامی حقوق مادی و معنوی این وب اپلیکیشن متعلق به توسعه دهنده آن(محمود اسماعیلی) می باشد و هرگونه کپی برداری غیرقانونی محسوب خواهد شد
    {% endblock %}
  </div>
</footer>
<!--<button type="button" class="scroll-top" onclick="goTop();">بازگشت <i class="bi-arrow-up-circle-fill"></i></button>-->
<button id="myBtn" type="button" class="btn btn-outline-success scroll-top" onclick="goTop();">بازگشت
       <i class="bi-arrow-up-circle-fill"></i></button>

<!---------------------------------------------------------------------------------------------------------->
</body>
</html>
